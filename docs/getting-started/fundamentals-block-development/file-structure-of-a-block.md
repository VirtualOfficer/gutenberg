# File structure of a block

The most common way to register a custom block is via a JSON file that contains all of the metadata of the block.

The recommended way to register a block is via a plugin. With the `create-block` tool you can quickly scaffold the structure of the files required to create a plugin that registers a block. 

The files generated by this tool are a good reference of the files that can be involved in the definition and registration of a block.

[![Open File Structure of a Block Diagram in excalidraw](https://developer.wordpress.org/files/2023/11/file-structure-block.png)](https://excalidraw.com/#json=YYpeR-kY1ZMhFKVZxGhMi,mVZewfwNAh_oL-7bj4gmdw "Open File Structure of a Block Diagram in excalidraw")

### `<plugin-file>.php`

A block is usually added to the block editor using a WordPress plugin. In the main PHP file of the plugin the block is usually registered on the server side.

<div class="callout callout-info">
For more on creating a WordPress plugin see <a href="https://developer.wordpress.org/plugins/plugin-basics/">Plugin Basics</a>, and <a href="https://developer.wordpress.org/plugins/plugin-basics/header-requirements/">Plugin Header requirements</a> for explanation and additional fields you can include in your plugin header.
</div>

### `package.json`

[`package.json`](https://docs.npmjs.com/cli/v10/configuring-npm/package-json) is a configuration file for a NodeJs project. In this file you define the NPM dependencies of the block and the scripts used for local work.

### `src` folder

In a standard project you'll place your block files in the `src` folder. By default, the build process with `wp-scripts `will take files from this folder and will generate the bundled files in the `build` folder. 

### `block.json`

This file contains the metadata of the block, and it's used to simplify the definition and registration of the block. 

Among other data it provides properties to define the paths of the files involved in the block's behaviour, output and style. If there's a build process involved, this `block.json` along with the generated files are placed into a destination folder (usually the `build` folder) so the paths provided target to the bundled versions of these files.

The most relevant properties that can be defined in a `block.json` to set the files involved in the block's behaviour, output or style are:
- The `editorScript` property, usually set with the path of a bundled `index.js` file (output build from `src/index.js`).
- The `style` property, usually set with the path of a bundled `style-index.css` file (output build from `src/style.scss`).
- The `editorStyle` property, usually set with the path of a bundled `index.css` (output build from `src/editor.scss`).
- The `render` property, usually set with the path of a bundled `render.php` (output copied from `src/render.php`).
- The `viewScript` property, usually set with the path of a bundled `view.js` (output copied from `src/view.php`).

[![Open Build Output Diagram in excalidraw](https://developer.wordpress.org/files/2023/11/file-structure-build-output.png)](https://excalidraw.com/#json=c22LROgcG4JkD-7SkuE-N,rQW_ViJBq0Yk3qhCgqD6zQ "Open Build Output Diagram in excalidraw")

### `index.js`

The `index.js` file (or any other file defined in the `editorScript` property of `block.json`) is the entry point file for javascript files and it usually registers the block in the client. In a standard structure it imports the `edit.js` and `save.js` files to get functions required in block registration.

### `edit.js`

The `edit.js` file usually returns the `edit` function used in block registration that defines the React component that will be loaded on the Editor when the block is loaded or inserted.

### `save.js`

The `save.js` file usually returns the `save` function used in block registration that defines the markup used to save the block in the DB.

### `style.scss`

The `style.scss` file contains the styles of the block that will be loaded in both the editor and the frontend. In the build process this file is converted into `style-index.css` which is usually defined at `style` property in `block.json`

<div class="callout callout-info">
    <code>.scss</code> files correspond to files with SASS Syntax. <a href="https://sass-lang.com/">SASS</a> ("Syntactically Awesome Style Sheets") is a preprocessor scripting language for CSS. It is used to enhance the capabilities of CSS by providing features like variables, mixins, nesting, and more. The build process transforms the code from these <code>.scss</code> source files into CSS code in <code>.css</code> files.
</div>


### `editor.scss`

The `editor.scss` file contains the additional styles applied to the block only in the editorâ€™s context. In the build process this file is converted into `index.css` which is usually defined at `editorStyle` property in `block.json`

### `render.php`

The `render.php` file (or any other file defined in the `render` property of `block.json`) defines the server side process that returns the markup for the block when there is a request from the frontend. If this file is defined, it will take precedence over any other ways to render the block's markup for the frontend.

### `view.js`

The `view.js` file (or any other file defined in the `viewScript` property of `block.json`) will be loaded in the front-end when the block is displayed.

### `build` folder

In a standard project, the `build` folder contains the generated files in the build process triggered by the `build` or `start` commands of `wp-scripts`. 

<div class="callout callout-tip">
    You can use <code>webpack-src-dir</code> and <code>output-path</code> option of <code>wp-scripts</code> build commands to <a href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#automatic-block-json-detection-and-the-source-code-directory">customize the entry and output points</a>
</div>

## Additional resources

- [Metadata in block.json](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/)
- [`wp-scripts build`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#build)
- [`wp-scripts start`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#start)
- [How webpack and WordPress packages interact](https://developer.wordpress.org/news/2023/04/how-webpack-and-wordpress-packages-interact/) | Developer Blog
